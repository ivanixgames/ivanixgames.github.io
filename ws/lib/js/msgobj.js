!function(e){var t=function(){var t=this;t._cmdWin=function(e,i){var n,r,o;console.log("MsgFrameParent: cmdWin: "+e+" src: "+i.source),t._win={e:i,value:e,src:i.source},n=i.source.frameElement,t._fe=n,n.setAttribute("data",e.url),n.parentElement.setAttribute("class","ivxframe  ivx-max"),n.setAttribute("class","ivx-"+e.mode),o=n.getAttribute("ivx-src"),r=n.parentElement.querySelector(".ivx-win-close"),r.onclick=function(e){n.parentElement.setAttribute("class","ivxframe"),n.setAttribute("data",o)}},t._cmdRedirect=function(e,i){var n,r,o,c,a;if(a=e.mode,console.log("_cmdRedirect: mode: "+a),"parent"!==a)return void t._cmdWin(e,i);if(console.log("_cmdRedirect: redirect"),c=e.url,c.match("^http")){if(n=c.split("//")[1].split("/")[0],r=n.split("."),o=r.slice(1).join("."),"ivanix.com"!==o)return void console.error("MsgFrameParent: base domain failed!")}else if(!c.match("^/"))return void console.error("MsgFrameParent: unkown url string!");location.href=c},t._parseMsg=function(e){var i=e.data;switch(i.cmd){case"redirect":t._cmdRedirect(i.value,e)}},t._onRcv=function(e){return t._rcvEvent=e,e.origin!==location.origin?void console.log("MsgFrameParent: origin mismatch!"):void t._parseMsg(e)},t._init=function(){e.addEventListener("message",t._onRcv)},t._init()},i=function(){var t=this;t._onRcv=function(e){},t.cmdRedirect=function(e,t){var i,n;console.log("cmdRedirect: url: "+e+"  mode: "+t),n={url:e,mode:t},i={cmd:"redirect",value:n},parent.postMessage(i,parent.location.origin)},t._init=function(){e.addEventListener("message",t._onRcv)},t._init()};parent===e?e.ivxMsgParent=new t:e.ivxMsgObj=new i}(window);